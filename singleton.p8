pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	game = create_game()
	game2 = create_game_2()
end

function _update60()
	game.frames+=1
	game2.frames+=1
	if(btn(5)) then
		game=create_game()
		game2=create_game_2()
	end

end

function _draw()
	cls()
	print("press âŽ to init")
	print("singleton: ")
	print("serial: "..game.serial_num)
	print(game.frames)	
	
	print("-----------------")
	print("not singleton: ")
	print("serial: "..game2.serial_num)
	print(game2.frames)	
	
end
-->8
--singleton

--if a game had been created before, just reset the frame
function create_game()
	if game then 
		game.frames = 0
		return game
	end
	
	local g = {
		frames=0,
		serial_num=rnd(100)
	}
	return g
end

-- compare to non singleton
function create_game_2()
	local g = {
		frames=0,
		serial_num=rnd(100)
	}
	return g
end


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
